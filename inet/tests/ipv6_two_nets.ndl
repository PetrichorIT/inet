module Host {
    gates {
        port
    }
}

module Switch {
    gates {
        port[3]
    }
}

module Router {
    gates {
        lan,
        wan
    }
}

link L {
    bitrate: 100000000,
    jitter: 0.0,
    latency: 0.02
}

module LAN {
    gates {
        wan
    }

    submodules {
        host[2]: Host,
        switch: Switch,
        router: Router,
    }

    connections {
        host[0]/port <-- L --> switch/port[0],
        host[1]/port <-- L --> switch/port[1],
        router/lan <-- L --> switch/port[2],
        router/wan <--> wan
    }
}

module Main {
    submodules {
        net[2]: LAN
    }

    connections {
        net[0]/wan <-- L --> net[1]/wan
    }
}

entry Main;