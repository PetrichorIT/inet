link LAN {
    jitter: 0.0,
    latency: 0.01,
    bitrate: 10000000,
}

link WAN {
    jitter: 0.0,
    latency: 0.05,
    bitrate: 100000000,
}

module Node {
    gates {
       port
    }
}

module Switch {
    gates {
        port[5],
        uplink,
    }
}

module Router {
    gates {
        lan,
        wan,
    }
}

module Main {
    submodules {
        left[5]: Node,
        left_switch: Switch,

        right[5]: Node,
        right_switch: Switch,

        lrouter: Router,
        rrouter: Router,
    }

    connections {
        left/port <-- LAN --> left_switch/port,

        right/port <-- LAN --> right_switch/port,

        left_switch/uplink <-- LAN --> lrouter/lan,

        right_switch/uplink <-- LAN --> rrouter/lan,

        lrouter/wan <-- WAN --> rrouter/wan,
    }
}

entry Main;